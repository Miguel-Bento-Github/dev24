<script setup lang="ts">
defineProps<{ isDrawing: boolean }>();
</script>

<template>
  <svg
    :class="{ active: isDrawing }"
    class="email"
    width="512pt"
    height="512pt"
    version="1.1"
    viewBox="0 0 512 512"
    xmlns="http://www.w3.org/2000/svg"
    labelledby="emailTitle"
  >
    <title id="emailTitle">email icon</title>
    <g class="envelope">
      <path
        pathLength="100"
        d="m447.65 223.23-222.5-128.4c-1.9219-1.1719-4.3281-1.2188-6.293-0.12109-0.20703 0.12109-28.801 16.648-29.457 17.023-1.9492 1.1562-3.125 3.2695-3.0781 5.5352l-0.46484 164.12c0.058594 3.0156 1.6484 5.7969 4.2227 7.375l223.11 128.81c1 0.58594 2.1367 0.89453 3.2969 0.90625 1.0469 0 2.0742-0.27344 2.9844-0.79688 0.54297-0.3125 28.105-16.367 28.898-16.824 1.9219-1.1484 3.082-3.2422 3.0312-5.4805l0.46875-164.8c-0.0625-3.0078-1.6562-5.7773-4.2227-7.3477zm-35.328 182.02-216.22-124.84 0.44141-156.89 216.21 124.83zm4.8242-166.19-214.13-123.62 18.398-10.996 214.12 123.62zm24.027 153.4-18.609 11.125 0.44141-156.1 18.613-11.121z"
      />
      <path
        class="opening"
        pathLength="100"
        d="m298.38 293.44c1.0391 1.6445 2.4492 3.0195 4.1172 4.0156 1.2617 0.74609 2.6992 1.1445 4.1641 1.1602 0.91797 0.003907 1.8242-0.17188 2.6758-0.51562l92.473-37.891c2.5977-1.082 3.8359-4.0586 2.7695-6.6641-1.0664-2.6055-4.0352-3.8633-6.6484-2.8125l-90.891 37.242-0.046875-0.066406-93.262-145.12c-0.73047-1.1484-1.8906-1.9609-3.2227-2.25-1.3281-0.29297-2.7188-0.042968-3.8672 0.69531-1.1445 0.73438-1.9492 1.8984-2.2344 3.2305-0.28516 1.332-0.027344 2.7227 0.71484 3.8633z"
      />
      <g class="strokeless">
        <path
          pathLength="100"
          d="m447.65 223.23-222.5-128.4c-1.9219-1.1719-4.3281-1.2188-6.293-0.12109-0.20703 0.12109-28.801 16.648-29.457 17.023-1.9492 1.1562-3.125 3.2695-3.0781 5.5352l-0.46484 164.12c0.058594 3.0156 1.6484 5.7969 4.2227 7.375l223.11 128.81c1 0.58594 2.1367 0.89453 3.2969 0.90625 1.0469 0 2.0742-0.27344 2.9844-0.79688 0.54297-0.3125 28.105-16.367 28.898-16.824 1.9219-1.1484 3.082-3.2422 3.0312-5.4805l0.46875-164.8c-0.0625-3.0078-1.6562-5.7773-4.2227-7.3477zm-35.328 182.02-216.22-124.84 0.44141-156.89 216.21 124.83zm4.8242-166.19-214.13-123.62 18.398-10.996 214.12 123.62zm24.027 153.4-18.609 11.125 0.44141-156.1 18.613-11.121z"
        />
        <path
          class="opening"
          pathLength="100"
          d="m298.38 293.44c1.0391 1.6445 2.4492 3.0195 4.1172 4.0156 1.2617 0.74609 2.6992 1.1445 4.1641 1.1602 0.91797 0.003907 1.8242-0.17188 2.6758-0.51562l92.473-37.891c2.5977-1.082 3.8359-4.0586 2.7695-6.6641-1.0664-2.6055-4.0352-3.8633-6.6484-2.8125l-90.891 37.242-0.046875-0.066406-93.262-145.12c-0.73047-1.1484-1.8906-1.9609-3.2227-2.25-1.3281-0.29297-2.7188-0.042968-3.8672 0.69531-1.1445 0.73438-1.9492 1.8984-2.2344 3.2305-0.28516 1.332-0.027344 2.7227 0.71484 3.8633z"
        />
      </g>
    </g>
    <g class="lines" :class="{ active: isDrawing }">
      <path
        pathLength="100"
        d="m164.79 149.18-45.922-26.516h0.003907c-2.4492-1.4141-5.582-0.57422-6.9961 1.875-1.4141 2.4492-0.57422 5.582 1.875 6.9961l45.922 26.516c2.4492 1.4102 5.5781 0.57031 6.9922-1.8789 1.4102-2.4453 0.57422-5.5781-1.875-6.9922z"
      />
      <path
        pathLength="100"
        d="m139.82 192.02c2.3203 0.003907 4.3516-1.5547 4.9531-3.793 0.60156-2.2383-0.37891-4.6055-2.3867-5.7617l-74.582-43.062c-1.1758-0.67969-2.5742-0.86328-3.8867-0.51172s-2.4297 1.2109-3.1094 2.3867c-0.67969 1.1758-0.86328 2.5742-0.51172 3.8867s1.2109 2.4297 2.3906 3.1094l74.578 43.059c0.77734 0.44922 1.6602 0.6875 2.5547 0.6875z"
      />
      <path
        pathLength="100"
        d="m152.62 232.38-45.922-26.516h0.003906c-2.4492-1.4141-5.582-0.57422-6.9961 1.875-1.4141 2.4492-0.57422 5.582 1.875 6.9961l45.922 26.516c1.1758 0.67969 2.5742 0.86328 3.8867 0.51172s2.4297-1.207 3.1094-2.3867c0.67969-1.1758 0.86328-2.5742 0.51172-3.8867s-1.2109-2.4297-2.3906-3.1094z"
      />
    </g>
  </svg>
</template>

<style lang="scss" scoped>
.email {
  fill: none;
  stroke: currentColor;
  stroke-width: 2px;
  stroke-dasharray: 100;
  stroke-dashoffset: 0;
  height: 40px;
  width: 40px;
  filter: drop-shadow(0 0 2px #fa8072);
  margin-left: -8px;
  margin-right: 8px;

  &:hover .strokeless,
  &.active .strokeless {
    animation: draw 0.4s ease-in-out alternate forwards;
  }
}
.lines.active {
  @for $i from 1 through 3 {
    path:nth-child(#{$i}) {
      animation: draw 0.15s ease-in-out forwards;
      animation-delay: 0.2s + (0.1s * $i);
    }
  }
}

.lines path,
.strokeless {
  stroke-width: 4px;
  stroke-dashoffset: 100;
}

@keyframes draw {
  to {
    stroke-dashoffset: 0;
  }
}
</style>
